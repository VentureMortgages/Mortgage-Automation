---
milestone: v1.1
audited: 2026-02-26
status: gaps_found
scores:
  requirements: 2/19
  phases: 1/5
  integration: 6/8
  flows: 3/4
gaps:
  requirements:
    - id: "PIPE-01"
      status: "partial"
      phase: "12"
      claimed_by_plans: ["12-01-PLAN.md"]
      completed_by_plans: ["12-01-SUMMARY.md"]
      verification_status: "passed"
      evidence: "createOrUpdateReviewTask deduplicates in checklist-sync, but classification-worker.ts still calls createReviewTask directly (lines 103, 169), bypassing dedup on low-confidence and no-folder paths"
    - id: "PIPE-02"
      status: "partial"
      phase: "12"
      claimed_by_plans: ["12-02-PLAN.md"]
      completed_by_plans: ["12-02-SUMMARY.md"]
      verification_status: "passed"
      evidence: "sent-detector.ts correctly moves stage on email send, but checklist-sync.ts line 155 also calls updateOpportunityStage(collectingDocuments) at webhook time — contradicts CONTEXT.md decision that stage moves on email send only"
    - id: "SYNC-01"
      status: "unsatisfied"
      phase: "13"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 13 not started — no plans, no code, no verification"
    - id: "SYNC-02"
      status: "unsatisfied"
      phase: "13"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 13 not started"
    - id: "SYNC-03"
      status: "unsatisfied"
      phase: "13"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 13 not started"
    - id: "FOLD-01"
      status: "unsatisfied"
      phase: "14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started"
    - id: "FOLD-02"
      status: "unsatisfied"
      phase: "14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started"
    - id: "FOLD-03"
      status: "unsatisfied"
      phase: "14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started"
    - id: "FOLD-04"
      status: "unsatisfied"
      phase: "14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started"
    - id: "FOLD-05"
      status: "unsatisfied"
      phase: "14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started"
    - id: "ORIG-01"
      status: "unsatisfied"
      phase: "15"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 15 not started"
    - id: "ORIG-02"
      status: "unsatisfied"
      phase: "15"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 15 not started"
    - id: "ORIG-03"
      status: "unsatisfied"
      phase: "15"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 15 not started"
    - id: "REMIND-01"
      status: "unsatisfied"
      phase: "16"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 16 not started"
    - id: "REMIND-02"
      status: "unsatisfied"
      phase: "16"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 16 not started"
    - id: "REMIND-03"
      status: "unsatisfied"
      phase: "16"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 16 not started"
    - id: "REMIND-04"
      status: "unsatisfied"
      phase: "16"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 16 not started"
  integration:
    - from: "src/crm/checklist-sync.ts"
      to: "src/crm/opportunities.ts"
      issue: "checklist-sync.ts line 155 moves stage to Collecting Documents at webhook time, contradicting CONTEXT.md decision that stage moves on email send only"
      affected_requirements: ["PIPE-02"]
    - from: "src/classification/classification-worker.ts"
      to: "src/crm/tasks.ts"
      issue: "classification-worker.ts calls createReviewTask directly (lines 103, 169) instead of createOrUpdateReviewTask, bypassing dedup for low-confidence and no-folder paths"
      affected_requirements: ["PIPE-01"]
  flows: []
tech_debt: []
---

# Milestone v1.1 Audit Report: Production Hardening

**Audited:** 2026-02-26
**Status:** gaps_found
**Score:** 2/19 requirements fully satisfied (2 partial, 15 unsatisfied)

---

## Executive Summary

Milestone v1.1 has 5 phases (12-16). Only Phase 12 (CRM Pipeline Automation) is complete. Phases 13-16 have not been planned or started. This means 15 of 19 requirements have zero implementation.

Within Phase 12's completed work, the integration checker found two issues:
1. **PIPE-02 (partial):** Stage move fires at webhook time AND at email send — should only fire at email send per design decision
2. **PIPE-01 (partial):** Classification worker bypasses task deduplication by calling old `createReviewTask` instead of `createOrUpdateReviewTask`

---

## Requirements Coverage

### Satisfied (2/19)

| REQ-ID | Description | Phase | Evidence |
|--------|-------------|-------|----------|
| PIPE-03 | Review task auto-completes when stage advances | 12 | sent-detector step 3b: findReviewTask + completeTask; 5 tests |
| PIPE-04 | Professional contact type assigned in MBP | 12 | webhook worker step 8a: assignContactType; 6 tests |

### Partial (2/19)

| REQ-ID | Description | Phase | Issue |
|--------|-------------|-------|-------|
| PIPE-01 | One review task per Finmo application | 12 | classification-worker.ts bypasses dedup (calls createReviewTask directly at lines 103, 169) |
| PIPE-02 | Stage auto-moves on email send | 12 | checklist-sync.ts line 155 also moves stage at webhook time, before email is sent |

### Unsatisfied (15/19)

| REQ-ID | Description | Phase | Status |
|--------|-------------|-------|--------|
| SYNC-01 | Retry CRM sync at intervals | 13 | Phase not started |
| SYNC-02 | File docs before MBP exists, retro-apply | 13 | Phase not started |
| SYNC-03 | Research Finmo external system API | 13 | Phase not started |
| FOLD-01 | CRM-first folder resolution | 14 | Phase not started |
| FOLD-02 | Email/phone fallback matching | 14 | Phase not started |
| FOLD-03 | Multi-borrower routing | 14 | Phase not started |
| FOLD-04 | Subfolder pre-creation | 14 | Phase not started |
| FOLD-05 | Interactive backfill script | 14 | Phase not started |
| ORIG-01 | Original doc preservation | 15 | Phase not started |
| ORIG-02 | Low-confidence doc preservation | 15 | Phase not started |
| ORIG-03 | Re-upload version preservation | 15 | Phase not started |
| REMIND-01 | CRM task + draft for outstanding docs | 16 | Phase not started |
| REMIND-02 | Email notification for follow-ups | 16 | Phase not started |
| REMIND-03 | Reminder refresh every 3 days | 16 | Phase not started |
| REMIND-04 | Reminders stop when all docs received | 16 | Phase not started |

---

## Phase Status

| Phase | Status | Plans | Requirements |
|-------|--------|-------|-------------|
| 12. CRM Pipeline Automation | Complete | 3/3 | PIPE-01 (partial), PIPE-02 (partial), PIPE-03, PIPE-04 |
| 13. Timing & Sync Resilience | Not started | 0/TBD | SYNC-01, SYNC-02, SYNC-03 |
| 14. Folder Matching & Backfill | Not started | 0/TBD | FOLD-01..05 |
| 15. Original Doc Preservation | Not started | 0/TBD | ORIG-01..03 |
| 16. Automated Reminders | Not started | 0/TBD | REMIND-01..04 |

---

## Integration Issues (Phase 12)

### 1. Stage move fires too early (PIPE-02)

**Location:** `src/crm/checklist-sync.ts:155`
**Issue:** `updateOpportunityStage(opportunityId, crmConfig.stageIds.collectingDocuments)` fires at webhook processing time. Per CONTEXT.md, stage should move only when Cat sends the email (BCC detection in sent-detector.ts).
**Fix:** Remove the `updateOpportunityStage` call from `checklist-sync.ts`, or replace with an application-received stage.

### 2. Classification worker bypasses task dedup (PIPE-01)

**Location:** `src/classification/classification-worker.ts:103, 169`
**Issue:** Calls `createReviewTask` directly instead of `createOrUpdateReviewTask`. Low-confidence and no-folder paths can create duplicate tasks.
**Fix:** Replace `createReviewTask` with `createOrUpdateReviewTask` (compatible signature).

---

_Audited: 2026-02-26_
_Auditor: Claude (gsd-integration-checker + orchestrator)_
